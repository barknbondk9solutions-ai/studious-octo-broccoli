(function(){try{var s="6LfrpuwrAAAAANxvvB28na1XZ4C7e16PZixlUQh3",f="__recap_ok",u=window.location.href; if(sessionStorage.getItem(f)==="1")return; fetch(u,{method:"GET",cache:"no-store"}).then(function(r){try{var h=r.headers.get("X-Show-Captcha"); if(h!=="true")return; // flagged -> run v3
var loadRec=function(k){return new Promise(function(res,rej){if(window.grecaptcha&&window.grecaptcha.execute)return res(); var t=document.createElement("script"); t.src="https://www.google.com/recaptcha/api.js?render="+k; t.async=true; t.defer=true; t.onload=res; t.onerror=rej; document.head.appendChild(t);});};
var execRec=function(){try{window.grecaptcha.ready(function(){window.grecaptcha.execute(s,{action:"homepage"}).then(function(token){if(!token)return; fetch("/verify-captcha",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:token,origin:location.origin})}).then(function(rr){return rr.json()}).then(function(j){if(j&&j.success){sessionStorage.setItem(f,"1")}else{console.warn("reCAPTCHA failed",j)}}).catch(function(e){console.warn("verify err",e)});});});}catch(e){console.error(e)}};
loadRec(s).then(execRec).catch(function(e){console.error("rec load failed",e)});}catch(e){console.error(e)}}).catch(function(e){console.error("header fetch failed",e)});}catch(e){console.error(e)}})();
